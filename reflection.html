<!doctype html>
<html lang="en" data-page="reflections">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Social Ease — Reflections</title>
  <link rel="stylesheet" href="style.css">
  <script src="common.js" defer></script>
</head>
<body>

<header class="site-header">
  <div class="header-row">
    <div class="brand">
      <img src="assets/logo.png" alt="Social Ease logo" class="site-logo">
      <div class="brand-text"><h1>Social Ease</h1><div class="tagline">Daily & professional settings — support for social ease</div></div>
    </div>

    <button id="nav-toggle" class="nav-toggle" aria-label="Toggle navigation">☰</button>

    <nav class="main-nav" role="navigation" aria-label="Main menu">
      <a href="index.html" class="nav-link">Home</a>
      <a href="challenges.html" class="nav-link">Challenges</a>
      <a href="social-cues.html" class="nav-link">Social Cues</a>
      <a href="calm-corner.html" class="nav-link">Calm Corner</a>
      <a href="reflections.html" class="nav-link">Reflections</a>
      <a href="progress.html" class="nav-link">Progress</a>
      <a href="settings.html" class="nav-link">Settings</a>
    </nav>

    <div class="header-controls">
      <button id="low-stim-toggle" class="icon-btn" aria-pressed="false" title="Toggle Low-Stim">🌓</button>
      <button id="voice-toggle" class="icon-btn" aria-pressed="false" title="Toggle Voice Hints">🔈</button>
      <a href="settings.html" class="icon-btn" title="Settings">⚙️</a>
    </div>
  </div>
</header>

<main class="centered">
  <section class="card">
    <h2>📝 Reflections — write and save short notes</h2>
    <p>Instruction: Type a short reflection, choose an event tag (optional), then Save. Saved reflections appear below.</p>

    <select id="reflection-event">
      <option value="">— Tag with event (optional) —</option>
      <option value="workplace">Work / Office</option>
      <option value="family">Family</option>
      <option value="party">Party</option>
      <option value="public">Public place</option>
      <option value="new">New environment</option>
    </select>

    <textarea id="reflection-input" placeholder="Write what happened and one small takeaway..."></textarea>
    <div style="display:flex;gap:8px;flex-wrap:wrap">
      <button id="save-reflection" class="pill-btn">Save Reflection</button>
      <button id="voice-reflect" class="pill-btn outline">Play voice hint</button>
    </div>

    <h3 style="margin-top:12px">Saved Reflections</h3>
    <ul id="reflection-list" class="list"></ul>
  </section>
</main>

<script>
document.addEventListener('DOMContentLoaded', ()=>{
  loadReflectionsUI();

  document.getElementById('save-reflection').addEventListener('click', ()=>{
    const text = document.getElementById('reflection-input').value.trim();
    const tag = document.getElementById('reflection-event').value;
    if(!text) return;
    saveReflection({text, tag, ts: Date.now()});
    document.getElementById('reflection-input').value='';
    loadReflectionsUI();
    if(window.voiceHint) voiceHint('Reflection saved. Good job.');
  });

  document.getElementById('voice-reflect').addEventListener('click', ()=> {
    voiceHint('Type a short note about how the event felt and one thing you learned.');
  });
});
</script>
</body>
</html>
