<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Social Ease ‚Äî Reflections</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body data-page="reflection">
  <header>
    <h1>Reflections ‚úçÔ∏è</h1>
    <p>Save multiple notes ‚Äî you can revisit progress and feelings later.</p>
    <nav>
      <a href="index.html" class="nav-link">Home</a>
      <a href="challenges.html" class="nav-link">Challenges</a>
      <a href="calm.html" class="nav-link">Calm Corner</a>
      <a href="reflection.html" class="nav-link">Reflections</a>
    </nav>
    <button id="low-stim-toggle" class="small-toggle">üåì Low-Stimulation</button>
  </header>

  <main>
    <section class="card">
      <h2>Write a Reflection</h2>
      <textarea id="note-input" placeholder="What happened? What felt good? What would you try next time?"></textarea>
      <div class="controls-row">
        <button id="save-note" class="action-btn">Save</button>
        <button id="clear-notes" class="action-btn subtle">Clear All</button>
      </div>

      <h3>Saved Notes</h3>
      <ul id="notes-list" class="list"></ul>
    </section>
  </main>

  <script src="common.js"></script>
  <script>
    // Reflection page logic
    const noteInput = document.getElementById('note-input');
    const saveNoteBtn = document.getElementById('save-note');
    const clearNotesBtn = document.getElementById('clear-notes');
    const notesList = document.getElementById('notes-list');

    function loadNotes() {
      const notes = JSON.parse(localStorage.getItem('reflections') || '[]');
      notesList.innerHTML = '';
      notes.forEach((n, idx) => {
        const li = document.createElement('li');
        li.className = 'note-item';
        li.textContent = n;
        // action: delete single note on click+confirm
        const del = document.createElement('button');
        del.textContent = 'Delete';
        del.className = 'tiny-subtle';
        del.addEventListener('click', () => {
          if (confirm('Delete this note?')) {
            notes.splice(idx, 1);
            localStorage.setItem('reflections', JSON.stringify(notes));
            loadNotes();
          }
        });
        li.appendChild(del);
        notesList.appendChild(li);
      });
    }

    saveNoteBtn.addEventListener('click', () => {
      const val = noteInput.value.trim();
      if (!val) return;
      const notes = JSON.parse(localStorage.getItem('reflections') || '[]');
      notes.push(val);
      localStorage.setItem('reflections', JSON.stringify(notes));
      noteInput.value = '';
      loadNotes();
    });

    clearNotesBtn.addEventListener('click', () => {
      if (confirm('Clear all saved reflections?')) {
        localStorage.removeItem('reflections');
        loadNotes();
      }
    });

    loadNotes();
  </script>
</body>
</html>
