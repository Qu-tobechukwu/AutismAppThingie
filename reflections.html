<!doctype html>
<html lang="en" data-page="reflections">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Social Ease â€” Reflections</title>
  <link rel="stylesheet" href="style.css">
  <script src="common.js" defer></script>
</head>
<body>
<div class="app">
<header class="site-header">
  <div class="brand">
    <img src="assets/logo.svg" class="site-logo" alt="Social Ease logo">
    <div class="brand-text"><h1>Social Ease</h1><div class="tagline">Write short reflections</div></div>
  </div>
  <button id="nav-toggle" class="nav-toggle" aria-label="Toggle navigation">â˜°</button>
  <nav class="main-nav" role="navigation">
    <a href="index.html" class="nav-link">Home</a>
    <a href="challenges.html" class="nav-link">Challenges</a>
    <a href="social-cues.html" class="nav-link">Social Cues</a>
    <a href="calm-corner.html" class="nav-link">Calm Corner</a>
    <a href="reflections.html" class="nav-link">Reflections</a>
    <a href="progress.html" class="nav-link">Progress</a>
    <a href="settings.html" class="nav-link">Settings</a>
  </nav>
  <div class="header-controls">
    <button id="low-stim-toggle" class="icon-btn">ğŸŒ“</button>
    <button id="voice-toggle" class="icon-btn">ğŸ”ˆ</button>
    <a href="settings.html" class="icon-btn">âš™ï¸</a>
  </div>
</header>

<main class="centered">
  <section class="card">
    <h2>ğŸ“ Reflections â€” write and save short notes</h2>
    <p class="muted">Instruction: choose an optional tag, write one or two sentences, then tap Save.</p>
    <select id="reflection-event" style="width:100%;padding:10px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);margin-bottom:8px">
      <option value="">â€” Tag with event (optional) â€”</option>
      <option value="workplace">Work / Office</option>
      <option value="family">Family</option>
      <option value="party">Party</option>
      <option value="public">Public place</option>
      <option value="new">New environment</option>
    </select>
    <textarea id="reflection-input" placeholder="Write a short reflection (what happened, one small takeaway)" style="width:100%;padding:10px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);min-height:100px"></textarea>
    <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
      <button id="save-reflection" class="pill-btn">Save Reflection</button>
      <button id="voice-reflect" class="pill-btn outline">ğŸ”Š Play hint</button>
    </div>

    <h3 style="margin-top:12px">Saved Reflections</h3>
    <ul id="reflection-list" class="list" style="margin-top:8px"></ul>
  </section>
</main>

<script>
document.addEventListener('DOMContentLoaded', ()=>{
  document.getElementById('save-reflection')?.addEventListener('click', ()=>{
    const text = document.getElementById('reflection-input').value.trim();
    const tag = document.getElementById('reflection-event').value;
    if(!text) { alert('Please write a short reflection before saving.'); return; }
    saveReflectionObj({text, tag, ts: Date.now()});
    document.getElementById('reflection-input').value = '';
    loadReflectionsUI();
  });
  document.getElementById('voice-reflect')?.addEventListener('click', ()=> voiceHint('Type your thoughts and one small takeaway, then press Save.'));
});
</script>
</div>
</body>
</html>
