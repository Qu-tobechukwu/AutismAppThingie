// Elements
const lowStimToggle = document.getElementById('low-stim-toggle');
const loadChallengesBtn = document.getElementById('load-challenges');
const challengeList = document.getElementById('challenge-list');
const reflectionInput = document.getElementById('reflection-input');
const saveReflectionBtn = document.getElementById('save-reflection');
const reflectionList = document.getElementById('reflection-list');

// === Low-Stimulation Mode ===
if (localStorage.getItem('low-stim') === 'true') {
  document.body.classList.add('low-stim');
}

lowStimToggle.addEventListener('click', () => {
  document.body.classList.toggle('low-stim');
  localStorage.setItem('low-stim', document.body.classList.contains('low-stim'));
});

// === Challenges Data ===
const challenges = {
  party: [
    "Compliment someoneâ€™s outfit ðŸ‘—",
    "Find a quiet spot and take 3 deep breaths ðŸŒ¬ï¸",
    "Say hi to one new person ðŸ‘‹",
    "Notice 3 things you like about the environment ðŸŒˆ"
  ],
  church: [
    "Smile at someone nearby ðŸ™",
    "Share one nice word after service ðŸ’¬",
    "Sit next to someone new ðŸª‘",
    "Thank someone for coming ðŸ’™"
  ],
  workshop: [
    "Ask one question to the speaker âœ‹",
    "Take a short walk during the break ðŸš¶â€â™€ï¸",
    "Write one takeaway in your notebook ðŸ“",
    "Share a thought with a partner ðŸ¤"
  ],
  networking: [
    "Introduce yourself to 2 people ðŸ’¼",
    "Ask about someoneâ€™s interests ðŸ‘‚",
    "Find one thing in common ðŸŒ",
    "Take a break if you feel overstimulated ðŸ•Šï¸"
  ]
};

// === Load Challenges ===
loadChallengesBtn.addEventListener('click', () => {
  const type = document.getElementById('event-type').value;
  challengeList.innerHTML = "";
  if (challenges[type]) {
    challenges[type].forEach(ch => {
      const li = document.createElement('li');
      li.textContent = ch;
      challengeList.appendChild(li);
    });
  }
});

// === Reflection Notes ===
function loadReflections() {
  const saved = JSON.parse(localStorage.getItem('reflections') || '[]');
  reflectionList.innerHTML = "";
  saved.forEach(note => {
    const li = document.createElement('li');
    li.textContent = note;
    reflectionList.appendChild(li);
  });
}

saveReflectionBtn.addEventListener('click', () => {
  const text = reflectionInput.value.trim();
  if (!text) return;
  const saved = JSON.parse(localStorage.getItem('reflections') || '[]');
  saved.push(text);
  localStorage.setItem('reflections', JSON.stringify(saved));
  reflectionInput.value = "";
  loadReflections();
});

loadReflections();
